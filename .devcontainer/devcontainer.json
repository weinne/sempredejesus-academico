{
  "name": "Sistema Acadêmico - Desenvolvimento",
  "dockerComposeFile": "docker-compose.yml",
  "service": "dev",
  "workspaceFolder": "/workspace",
  
  // Configurações do container
  "customizations": {
    "vscode": {
      "extensions": [
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "ms-vscode.vscode-typescript-next",
        "bradlc.vscode-tailwindcss",
        "ms-azuretools.vscode-docker",
        "cweijan.vscode-database-client2",
        "mtxr.sqltools",
        "mtxr.sqltools-driver-pg"
      ],
      "settings": {
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
          "source.fixAll.eslint": "explicit"
        },
        "typescript.tsdk": "node_modules/typescript/lib",
        "typescript.enablePromptUseWorkspaceTsdk": true,
        "files.exclude": {
          "**/.git": true,
          "**/.DS_Store": true,
          "**/node_modules": true,
          "**/dist": true
        }
      }
    }
  },

  // Comandos pós-criação
  "postCreateCommand": "chmod +x .devcontainer/*.sh && bash .devcontainer/post-create.sh",
  
  // Comandos pós-start (executado sempre que o container inicia)
  "postStartCommand": "echo 'Container iniciado com sucesso!'",
  
  // Variáveis de ambiente
  "remoteEnv": {
    "DATABASE_URL": "postgresql://postgres:passwd@db:5432/seminario_db",
    "NODE_ENV": "development",
    "PORT": "4000",
    "APP_URL": "http://localhost:3001",
    "API_URL": "http://localhost:4000",
    "JWT_SECRET": "dev-jwt-secret-change-in-production",
    "JWT_EXPIRES_IN": "7d",
    "REFRESH_TOKEN_SECRET": "dev-refresh-secret-change-in-production"
  },

  // Features opcionais
  "features": {
    "ghcr.io/devcontainers/features/git:1": {
      "version": "latest"
    },
    "ghcr.io/devcontainers/features/docker-in-docker:2": {
      "version": "latest",
      "moby": true
    }
  },

  // Portas forward automático
  "forwardPorts": [3001, 4000, 5432, 5433, 5434, 8080],
  "portsAttributes": {
    "3001": {
      "label": "Portal (Frontend)",
      "onAutoForward": "notify"
    },
    "4000": {
      "label": "API",
      "onAutoForward": "notify"
    },
    "5432": {
      "label": "PostgreSQL (padrão)",
      "onAutoForward": "silent"
    },
    "5433": {
      "label": "PostgreSQL (alternativa 1)",
      "onAutoForward": "silent"
    },
    "5434": {
      "label": "PostgreSQL (alternativa 2)",
      "onAutoForward": "silent"
    },
    "8080": {
      "label": "Adminer",
      "onAutoForward": "silent"
    }
  },

  // Configurações de terminal
  "remoteUser": "node"
}

